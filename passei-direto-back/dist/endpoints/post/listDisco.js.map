{"version":3,"sources":["../../../src/endpoints/post/listDisco.js"],"names":["requestBodyValidation","requestBody","page","logger","warn","isNaN","main","request","response","body","discoDao","DiscoDao","getCountDiscos","then","selectAll","status","json","discoCount","res","countDisco","result","catch","error","message","route"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;AAEA,IAAMA,wBAAwB,SAAxBA,qBAAwB,cAAe;AAC3C,UAAQ,IAAR;AACE,SAAK,CAACC,YAAYC,IAAlB;AACEC,uBAAOC,IAAP,CAAY,sCAAZ;AACA,aAAO,KAAP;AACF,SAAKC,MAAMJ,YAAYC,IAAlB,CAAL;AACEC,uBAAOC,IAAP,CAAY,uCAAZ;AACA,aAAO,KAAP;AACF,SAAKH,YAAYC,IAAZ,IAAoB,CAAzB;AACEC,uBAAOC,IAAP,CAAY,mDAAZ;AACA,aAAO,KAAP;AACF;AACE,aAAO,IAAP;AAXJ;AAaD,CAdD;;AAgBA,IAAME,OAAO,SAAPA,IAAO,CAACC,OAAD,EAAUC,QAAV,EAAuB;AAClC,MAAIR,sBAAsBO,QAAQE,IAA9B,CAAJ,EAAyC;AACvC,QAAMC,WAAW,IAAIC,eAAJ,EAAjB;AADuC,QAE/BT,IAF+B,GAEtBK,QAAQE,IAFc,CAE/BP,IAF+B;;AAGvCQ,aACGE,cADH,GAEGC,IAFH,CAEQ,eAAO;AACXH,eAASI,SAAT,CAAmBZ,IAAnB,EAAyBW,IAAzB,CAA8B,kBAAU;AACtCL,iBAASO,MAAT,CAAgB,GAAhB,EAAqBC,IAArB,CAA0B;AACxBC,sBAAYC,IAAI,CAAJ,EAAOC,UADK;AAExBC;AAFwB,SAA1B;AAID,OALD;AAMD,KATH,EAUGC,KAVH,CAUS,iBAAS;AACdlB,uBAAOmB,KAAP,CAAaA,KAAb;AACAd,eAASO,MAAT,CAAgB,GAAhB,EAAqBC,IAArB,CAA0B;AACxBM,eAAO,GADiB;AAExBC,iBACE;AAHsB,OAA1B;AAKD,KAjBH;AAkBD,GArBD,MAqBO;AACLf,aAASO,MAAT,CAAgB,GAAhB,EAAqBC,IAArB,CAA0B;AACxBM,aAAO,GADiB;AAExBC,eAAS;AAFe,KAA1B;AAID;AACF,CA5BD;;kBA8Be;AACbC,SAAO,YADM;AAEblB;AAFa,C","file":"listDisco.js","sourcesContent":["import DiscoDao from '../../model/Disco';\nimport logger from '../../utils/logger';\n\nconst requestBodyValidation = requestBody => {\n  switch (true) {\n    case !requestBody.page:\n      logger.warn(' POST request received without page ');\n      return false;\n    case isNaN(requestBody.page):\n      logger.warn(' POST request received with NaN page ');\n      return false;\n    case requestBody.page <= 0:\n      logger.warn(' POST request received with wrong format of page ');\n      return false;\n    default:\n      return true;\n  }\n};\n\nconst main = (request, response) => {\n  if (requestBodyValidation(request.body)) {\n    const discoDao = new DiscoDao();\n    const { page } = request.body;\n    discoDao\n      .getCountDiscos()\n      .then(res => {\n        discoDao.selectAll(page).then(result => {\n          response.status(200).json({\n            discoCount: res[0].countDisco,\n            result,\n          });\n        });\n      })\n      .catch(error => {\n        logger.error(error);\n        response.status(500).json({\n          error: 500,\n          message:\n            'Internal Server Error - Please contact the system administrator',\n        });\n      });\n  } else {\n    response.status(400).json({\n      error: 400,\n      message: 'Error while processing request body',\n    });\n  }\n};\n\nexport default {\n  route: '/listDisco',\n  main,\n};\n"]}